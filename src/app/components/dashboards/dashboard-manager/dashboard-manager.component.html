<div *ngIf="isLoading" class="flex items-center justify-center h-screen">
  <p class="text-lg font-medium text-gray-500">Loading data...</p>
</div>

<div *ngIf="!isLoading && dashboardData" class="p-4 md:p-6">
  <!-- Overview Cards -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-6">
    <!-- Card: Funcionários -->
    <div class="bg-white shadow-lg p-4 md:p-6 rounded-lg flex flex-col relative overflow-hidden">
      <h2 class="text-lg font-semibold text-center absolute top-4 left-0 right-0">Número de Funcionários</h2>
      <div class="flex-grow flex items-center justify-center relative mt-16 pb-24 md:pb-20">
        <p class="text-4xl font-bold text-info text-center">{{ dashboardData.employees }}</p>
      </div>
      <img
        src="workers.svg"
        alt="Workers Icon"
        class="h-14 w-14 md:h-20 md:w-20 absolute bottom-4 right-4"
      />
    </div>

    <!-- Card: Residentes -->
    <div class="bg-white shadow-lg p-4 md:p-6 rounded-lg flex flex-col relative overflow-hidden">
      <h2 class="text-lg font-semibold text-center absolute top-4 left-0 right-0">Número de Residentes</h2>
      <div class="flex-grow flex items-center justify-center relative mt-16 pb-24 md:pb-20">
        <p class="text-4xl font-bold text-secondary text-center">{{ dashboardData.residents }}</p>
      </div>
      <img
        src="couple.svg"
        alt="Couple Icon"
        class="h-14 w-14 md:h-20 md:w-20 absolute bottom-4 right-4"
      />
    </div>

    <!-- Card: Utilizadores -->
    <div class="bg-white shadow-lg p-4 md:p-6 rounded-lg flex flex-col relative overflow-hidden">
      <h2 class="text-lg font-semibold text-center absolute top-4 left-0 right-0">Número de Utilizadores</h2>
      <div class="flex-grow flex items-center justify-center relative mt-16 pb-24 md:pb-20">
        <p class="text-4xl font-bold text-primary text-center">{{ dashboardData.users }}</p>
      </div>
      <img
        src="team (3).svg"
        alt="Team Icon"
        class="h-14 w-14 md:h-20 md:w-20 absolute bottom-4 right-4"
      />
    </div>
  </div>

  <!-- Side-by-Side Charts -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
    <!-- Pie Chart Section -->
    <div class="bg-white shadow-lg p-4 md:p-6 rounded-lg flex flex-col min-h-[300px]">
      <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-4">Total de Utilizadores</h3>
      <div class="flex-grow flex items-center justify-center">
        <div class="w-full h-full flex items-center justify-center">
          <ngx-charts-pie-chart
            [view]="[cardWidth, cardHeight]"
            [customColors]="customColors"
            [results]="pieChartData"
            [gradient]="true"
            [doughnut]="false"
          ></ngx-charts-pie-chart>
        </div>
      </div>
    </div>

    <!-- Grouped Bar Chart Section -->
    <div class="bg-white shadow-lg p-4 md:p-6 rounded-lg flex flex-col min-h-[350px]">
      <h3 class="text-lg md:text-xl font-bold text-gray-700 mb-4">Pagamentos e Salários</h3>
      <div class="flex-grow flex items-center justify-center">
        <div class="w-full h-full flex flex-wrap justify-center overflow-hidden">
          <ngx-charts-bar-vertical-2d
            [view]="[cardWidth, cardHeight]"
            [customColors]="customColorsBars"
            [results]="groupedBarChartData"
            [gradient]="true"
            [xAxis]="true"
            [yAxis]="true"
            [showXAxisLabel]="true"
            [xAxisLabel]="'Meses'"
            [showYAxisLabel]="true"
            [yAxisLabel]="'Total Gasto (€)'"
          ></ngx-charts-bar-vertical-2d>
        </div>
      </div>
    </div>
  </div>
</div>
